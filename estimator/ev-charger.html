<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>EV Charger Install Estimator | Tentmakers Electric</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#050912;
    --panel:#0B1224;
    --card:#0F1A33;
    --glass:rgba(255,255,255,0.05);
    --accent:#4CF0FF;
    --accent-2:#7CFFB3;
    --accent-3:#5D7CFF;
    --text:#EAF3FF;
    --muted:#9CB3D9;
    --border:rgba(255,255,255,0.12);
    --shadow:0 20px 60px rgba(5,10,30,0.55);
  }
  *{box-sizing:border-box;}
  body{
    margin:0;padding:24px;font-family:'Space Grotesk', 'Montserrat', Arial, sans-serif;color:var(--text);
    background:
      radial-gradient(1200px at 15% 20%, rgba(76,240,255,0.18), transparent 60%),
      radial-gradient(1000px at 80% 0%, rgba(92,124,255,0.22), transparent 55%),
      linear-gradient(140deg, #040712 0%, #0A0F22 45%, #060814 100%);
    min-height:100vh;
  }
  .tmx-card{max-width:980px;margin:0 auto;background:linear-gradient(180deg, rgba(15,26,51,0.9), rgba(9,14,30,0.94));border:1px solid var(--border);border-radius:22px;padding:26px;box-shadow:var(--shadow);position:relative;overflow:hidden;}
  .tmx-card::after{content:"";position:absolute;inset:1px;border-radius:21px;border:1px solid rgba(76,240,255,0.18);opacity:0.55;pointer-events:none;}
  .tmx-head{text-align:center;margin-bottom:18px;position:relative;z-index:2;}
  .tmx-head img{height:42px;width:auto;display:block;margin:0 auto 10px auto;filter:drop-shadow(0 0 12px rgba(76,240,255,0.2));}
  .tmx-h{margin:0;font-size:26px;color:#EAF8FF;font-weight:800;letter-spacing:0.01em;}
  .tmx-sub{margin:10px auto 12px auto;color:var(--muted);font-size:15px;line-height:1.6;max-width:760px;}
  .tmx-badges{display:flex;justify-content:center;gap:10px;flex-wrap:wrap;margin-bottom:10px;}
  .badge{display:inline-flex;align-items:center;padding:6px 12px;border-radius:999px;border:1px solid rgba(76,240,255,0.5);color:var(--text);font-size:12px;font-weight:600;letter-spacing:0.08em;text-transform:uppercase;background:rgba(76,240,255,0.08);}
  .badge-ghost{border-color:rgba(255,255,255,0.18);background:rgba(255,255,255,0.05);color:var(--muted);}
  .meta-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:10px;margin:14px auto 6px;max-width:820px;}
  .meta-chip{border:1px solid var(--border);background:rgba(255,255,255,0.04);padding:10px 12px;border-radius:12px;color:var(--text);font-size:13px;display:flex;align-items:center;justify-content:center;gap:6px;box-shadow:0 10px 30px rgba(0,0,0,0.2);}
  .meta-chip strong{color:var(--accent);font-size:15px;}

  .tmx-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px;position:relative;z-index:2;}
  .tmx-grid>*{min-width:0;}
  label{display:block;font-weight:700;margin:8px 0 6px 0;font-size:13px;color:#EAF8FF;letter-spacing:0.01em;}
  select,input[type="number"],input[type="text"],input[type="email"],input[type="tel"],input[type="date"],input[type="time"],textarea{
    width:100%;padding:11px 12px;border:1px solid var(--border);border-radius:12px;font-size:14px;font-family:inherit;box-sizing:border-box;
    background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));color:var(--text);
    box-shadow:inset 0 1px 2px rgba(255,255,255,0.04), 0 8px 20px rgba(0,0,0,0.25);
    transition:border-color .15s ease, box-shadow .15s ease, transform .1s ease;
  }
  select:focus,input:focus,textarea:focus{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(76,240,255,0.25);}
  select option{color:#0A0F22;}
  textarea{min-height:76px;resize:vertical;}
  .tmx-help{font-size:12px;color:var(--muted);line-height:1.5;margin-top:4px;}
  .inline{display:flex;align-items:center;gap:10px;}
  .inline input[type="checkbox"]{width:auto;margin:0;}

  .tmx-summary{margin-top:22px;background:rgba(8,12,22,0.8);border:1px solid var(--border);border-radius:14px;padding:16px 16px 14px;box-shadow:0 14px 36px rgba(0,0,0,0.35);} 
  .tmx-summary-headline{font-size:15px;font-weight:700;color:var(--muted);margin:0 0 6px 0;letter-spacing:0.02em;}
  .tmx-money{font-size:30px;font-weight:900;color:var(--accent-2);margin:0;line-height:1.2;}
  .tmx-breakdown{font-size:13px;color:var(--text);margin-top:10px;line-height:1.6;}
  .tmx-note{font-size:12px;color:var(--muted);margin-top:12px;line-height:1.6;}
  .tmx-cta{margin-top:22px;text-align:center;}
  .tmx-cta button{background:linear-gradient(135deg, #45E1FF, #6C8CFF);color:#0A0F22;font-weight:800;padding:13px 18px;border-radius:12px;display:inline-block;border:none;font-size:16px;line-height:1.2;cursor:pointer;min-width:230px;box-shadow:0 12px 30px rgba(76,240,255,0.35);} 
  .tmx-cta button:hover{transform:translateY(-1px);} 

  .tmx-photo-wrap{border:1px dashed rgba(76,240,255,0.4);background:rgba(76,240,255,0.03);border-radius:12px;padding:14px;margin-top:10px;}
  .tmx-photo-wrap label{font-weight:700;font-size:13px;color:var(--text);margin:0 0 6px 0;}
  .tmx-photo-wrap input[type="file"]{display:block;margin-top:8px;font-size:13px;color:var(--text);} 

  .tmx-alert{margin-top:12px;padding:12px;border-radius:10px;font-size:13px;line-height:1.4;display:none;}
  .tmx-alert.success{background:rgba(124,255,179,0.1);color:#A6FFD1;border:1px solid rgba(124,255,179,0.6);} 
  .tmx-alert.error{background:rgba(255,114,114,0.08);color:#FFC3C3;border:1px solid rgba(255,114,114,0.4);} 

  .pricing-intro{margin:10px 0 12px;color:var(--accent);font-weight:700;font-size:14px;text-transform:uppercase;letter-spacing:.12em;text-align:center;}
  .pricing-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;margin-top:8px;}
  .pricing-card{position:relative;padding:16px;border-radius:14px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.08);box-shadow:0 12px 30px rgba(0,0,0,0.25);color:var(--text);} 
  .pricing-card::before{content:"";position:absolute;inset:0;border-radius:inherit;border:1px solid rgba(76,240,255,0.18);opacity:.5;pointer-events:none;} 
  .pricing-header{font-size:16px;font-weight:800;color:var(--accent);margin-bottom:6px;} 
  .pricing-cost{display:flex;flex-direction:column;margin-bottom:8px;font-weight:700;} 
  .pricing-cost span{font-size:12px;letter-spacing:.08em;color:var(--muted);text-transform:uppercase;} 
  .pricing-cost strong{font-size:18px;color:var(--text);} 
  .pricing-scope{margin:10px 0 0;padding-left:16px;color:var(--text);line-height:1.5;} 
  .pricing-scope li+li{margin-top:4px;} 

  .duke-credit{margin-top:24px;border:1px solid rgba(124,255,179,0.35);background:rgba(124,255,179,0.06);border-radius:14px;padding:14px;} 
  .duke-credit h3{margin:0 0 6px;font-size:16px;color:var(--accent-2);} 
  .duke-credit p{margin:4px 0 10px;color:var(--text);font-size:13px;line-height:1.6;} 
  .duke-credit ul{margin:0 0 8px 16px;padding:0;color:var(--text);font-size:13px;line-height:1.5;} 
  .duke-credit li+li{margin-top:4px;} 
  .duke-credit a{color:var(--accent);font-weight:700;} 

  .tmx-legal{font-size:11.5px;color:var(--muted);line-height:1.6;margin-top:16px;border-top:1px solid var(--border);padding-top:12px;} 

  @media(max-width:720px){
    body{padding:14px;}
    .tmx-card{padding:18px;}
    .tmx-grid{grid-template-columns:1fr;}
    .tmx-cta button{width:100%;}
  }
</style>
</head>
<body>
<div class="tmx-card" id="tmxCalc">
  <div class="tmx-head">
    <img src="https://static.wixstatic.com/media/466b09_38f375647c9040c68a3138baac578e62~mv2.png" alt="Tentmakers Electric word mark">
    <div class="tmx-badges">
      <span class="badge">Tesla Certified Installer</span>
      <span class="badge badge-ghost">Level 2 • Charlotte Metro</span>
      <span class="badge badge-ghost">Fast photo review</span>
    </div>
    <h2 class="tmx-h">EV Charger Install Estimator</h2>
    <p class="tmx-sub">Sleek, safe installs with clean conduit runs. Pricing is based on how far your charger is from the panel, plus any permit. Share a couple photos and we will confirm quickly.</p>
    <div class="meta-row">
      <div class="meta-chip">Next to panel: <strong>$600–$750</strong></div>
      <div class="meta-chip">Same wall up to 12 ft: <strong>$1,000–$1,200</strong></div>
      <div class="meta-chip">Across the room: <strong>~$1,600</strong></div>
      <div class="meta-chip">Permit (Duke Energy/City): <strong>$50</strong></div>
    </div>
  </div>

  <div class="pricing-intro">Quick ranges</div>
  <div class="pricing-grid">
    <div class="pricing-card">
      <div class="pricing-header">Next to panel</div>
      <div class="pricing-cost"><span>Same wall, within 12"</span><strong>$600–$750</strong></div>
      <ul class="pricing-scope">
        <li>Clean conduit drop next to panel</li>
        <li>Best for Tesla Wall Connector or 14-50 outlet</li>
      </ul>
    </div>
    <div class="pricing-card">
      <div class="pricing-header">Same wall run</div>
      <div class="pricing-cost"><span>Up to ~12 ft</span><strong>$1,000–$1,200</strong></div>
      <ul class="pricing-scope">
        <li>Conduit run along same wall</li>
        <li>Includes properly sized breaker</li>
      </ul>
    </div>
    <div class="pricing-card">
      <div class="pricing-header">Across the room</div>
      <div class="pricing-cost"><span>Opposite wall</span><strong>~$1,600</strong></div>
      <ul class="pricing-scope">
        <li>Surface conduit or overhead path</li>
        <li>Routing scoped after photo review</li>
      </ul>
    </div>
  </div>

  <form id="tmxForm" action="https://tentmakers-electric.vercel.app/api/sf/book" method="POST" enctype="multipart/form-data">
    <div class="tmx-grid">
      <div>
        <label for="custName">Your full name</label>
        <input id="custName" name="custName" type="text" placeholder="Jordan Smith" required>
      </div>
      <div>
        <label for="custEmail">Email</label>
        <input id="custEmail" name="custEmail" type="email" placeholder="you@email.com" required>
      </div>
      <div>
        <label for="custPhone">Phone</label>
        <input id="custPhone" name="custPhone" type="tel" placeholder="(704) 555-1234" required>
      </div>
      <div>
        <label for="run">Charger location vs panel</label>
        <select id="run" name="run">
          <option value="next">Next to panel (same wall, within 12")</option>
          <option value="samewall">Same wall run up to ~12 ft</option>
          <option value="across">Across the room / different wall</option>
        </select>
        <div class="tmx-help">Pick how far the charger will be from the electrical panel.</div>
      </div>
      <div>
        <label for="panelLoc">Where is the panel?</label>
        <select id="panelLoc" name="panelLoc">
          <option value="inside">Inside the garage</option>
          <option value="outside">Outside the garage</option>
          <option value="interior-other">Somewhere other than the garage</option>
        </select>
        <div class="tmx-help">If not in the garage, we will need a custom quote and photos.</div>
      </div>
      <div>
        <label for="chargerBrand">Charger hardware</label>
        <select id="chargerBrand" name="chargerBrand">
          <option value="tesla-wall">Tesla Wall Connector</option>
          <option value="tesla-universal">Tesla Universal Wall Connector</option>
          <option value="nacs">NACS-ready (other brand)</option>
          <option value="j1772">J1772 Level 2</option>
          <option value="other">Other / not sure</option>
        </select>
      </div>
      <div>
        <label for="amps">Desired charging amperage</label>
        <select id="amps" name="amps">
          <option value="60">60A / 48A charging (typical Tesla)</option>
          <option value="50">50A / 40A charging</option>
          <option value="40">40A / 32A charging</option>
          <option value="unknown">Not sure</option>
        </select>
      </div>
      <div>
        <label for="outsideOutlet">Outside outlet needed?</label>
        <div class="inline">
          <input id="outsideOutlet" name="outsideOutlet" type="checkbox"> <span class="tmx-help">Weatherproof outlet add-on (quoted after review).</span>
        </div>
      </div>
      <div>
        <label for="permit" class="inline" style="gap:8px;">
          <input id="permit" name="permit" type="checkbox" checked>
          <span>Add Duke Energy / city permit estimate ($50)</span>
        </label>
        <div class="tmx-help">Charlotte metro. We will confirm exact permit fees if different.</div>
      </div>
      <div>
        <label for="notes">Anything else? (panel upgrades, conduit routing preferences, vehicle)</label>
        <textarea id="notes" name="notes" placeholder="Vehicle make/model, parking spot, ceiling height, obstacles."></textarea>
      </div>
      <div>
        <label for="prefDate">Preferred date</label>
        <input id="prefDate" name="prefDate" type="date">
        <label for="prefStart" style="margin-top:8px;">Preferred start time</label>
        <input id="prefStart" name="prefStart" type="time">
      </div>
      <div class="tmx-photo-wrap" id="photoWrap" style="grid-column:1 / -1;">
        <label for="photos">Upload photos of the panel and parking area</label>
        <input id="photos" name="photos" type="file" accept="image/*" multiple>
        <div class="tmx-help" id="photoNote">Photos help us confirm routing and final price faster.</div>
      </div>
    </div>

    <div class="tmx-summary">
      <p class="tmx-summary-headline">Estimated total</p>
      <p class="tmx-money" id="tmxTotal">$1,000–$1,200</p>
      <div class="tmx-breakdown" id="tmxBreakdown"></div>
      <div class="tmx-note">
        This is an online estimate based on distance from the panel. Final pricing will be confirmed after photo review and a quick walkthrough. Tesla certified installer. Clean conduit runs and properly sized breakers included.
      </div>
    </div>

    <div class="tmx-cta">
      <button type="submit">Send My EV Charger Estimate</button>
    </div>
    <div class="tmx-alert success" id="tmxSuccess">Thanks! We received your EV charger request and will reach out shortly.</div>
    <div class="tmx-alert error" id="tmxError">Something went wrong. Please try again or call us.</div>

    <div class="duke-credit">
      <h3>Duke Energy Charger Prep Credit (up to $1,133 per charger)</h3>
      <p>Get reimbursed for preparing your home to charge. One-time credit per EV registered to your address; we will help document the install.</p>
      <ul>
        <li>Covers conduit, wiring, outlets supplying the charger.</li>
        <li>Covers panel upgrades and breaker installation.</li>
        <li>Covers EV charger hardware.</li>
        <li>Does not cover hardware mounting/commissioning or permit fees.</li>
        <li>In rare cases Duke Energy may require a Line Extension Plan if service to your panel needs an upstream upgrade.</li>
      </ul>
      <p><a href="https://www.duke-energy.com/home/products/ev-complete/charger-prep-credit" target="_blank" rel="noopener">See Duke Energy program details</a></p>
    </div>

    <div class="tmx-legal">
      Pricing assumes standard installs in the garage. "Somewhere other than the garage" routes require a custom quote and photos. Permit estimate is set to $50 for the Charlotte metro Duke Energy service area; we will confirm exact fees. Across-the-room runs depend on available conduit routing. Final price will be confirmed by Tentmakers Electric after review.
    </div>
  </form>
</div>

<script>
(function(){
  const RUN_OPTIONS = {
    next: { label: 'Next to panel (same wall, within 12\")', min: 600, max: 750 },
    samewall: { label: 'Same wall run up to ~12 ft', min: 1000, max: 1200 },
    across: { label: 'Across the room / different wall', min: 1600, max: 1600 }
  };
  const PERMIT_FEE = 50;

  const runEl = document.getElementById('run');
  const panelLocEl = document.getElementById('panelLoc');
  const permitEl = document.getElementById('permit');
  const outsideOutletEl = document.getElementById('outsideOutlet');
  const totalEl = document.getElementById('tmxTotal');
  const breakdownEl = document.getElementById('tmxBreakdown');
  const formEl = document.getElementById('tmxForm');
  const successEl = document.getElementById('tmxSuccess');
  const errorEl = document.getElementById('tmxError');
  const photosEl = document.getElementById('photos');
  const photoNoteEl = document.getElementById('photoNote');

  let currentEstimateValue = null;

  function setPhotoRequirement() {
    const needsCustom = panelLocEl.value === 'interior-other';
    photosEl.required = needsCustom;
    photoNoteEl.textContent = needsCustom
      ? 'Custom quote: please upload clear photos of the panel and parking area (inside/outside) so we can route it cleanly.'
      : 'Photos help us confirm routing and final price faster.';
  }

  function calc(){
    const runVal = runEl.value in RUN_OPTIONS ? runEl.value : 'samewall';
    const panelVal = panelLocEl.value;
    const permitChecked = permitEl.checked;

    const lines = [];

    if (panelVal === 'interior-other') {
      const baseRun = RUN_OPTIONS[runVal];
      const permitLine = permitChecked ? `+ Permit estimate: $${PERMIT_FEE}` : null;
      totalEl.textContent = 'Custom quote';
      lines.push(`Custom routing (panel not in garage). Base range reference: $${baseRun.min.toLocaleString()}${baseRun.max !== baseRun.min ? '–$' + baseRun.max.toLocaleString() : ''}.`);
      if (permitLine) lines.push(permitLine);
      if (outsideOutletEl.checked) lines.push('Outside outlet requested (quoted after review).');
      currentEstimateValue = null;
      breakdownEl.innerHTML = lines.map(l => `<div>• ${l}</div>`).join('');
      return;
    }

    const run = RUN_OPTIONS[runVal];
    const permitValue = permitChecked ? PERMIT_FEE : 0;
    const minTotal = (run.min || 0) + permitValue;
    const maxTotal = (run.max || run.min || 0) + permitValue;

    currentEstimateValue = Math.round((minTotal + maxTotal) / 2);

    lines.push(`Run distance (${run.label}): $${run.min.toLocaleString()}${run.max !== run.min ? '–$' + run.max.toLocaleString() : ''}`);
    if (panelVal === 'outside') lines.push('Panel is outside the garage: weatherproof routing noted.');
    if (permitChecked) lines.push(`+ Permit estimate: $${PERMIT_FEE}`);
    if (outsideOutletEl.checked) lines.push('Outside outlet requested (quoted after review).');

    totalEl.textContent = minTotal === maxTotal
      ? `$${maxTotal.toLocaleString()}`
      : `$${minTotal.toLocaleString()}–$${maxTotal.toLocaleString()}`;
    breakdownEl.innerHTML = lines.map(l => `<div>• ${l}</div>`).join('');
  }

  ['change','input','keyup'].forEach(evt => {
    runEl.addEventListener(evt, calc);
    panelLocEl.addEventListener(evt, () => { setPhotoRequirement(); calc(); });
    permitEl.addEventListener(evt, calc);
    outsideOutletEl.addEventListener(evt, calc);
  });
  setPhotoRequirement();
  calc();

  function toIsoWithOffset(dateStr, timeStr) {
    if (!dateStr || !timeStr) return null;
    const [h, m] = timeStr.split(':').map(Number);
    const d = new Date(dateStr);
    d.setHours(h || 0, m || 0, 0, 0);
    const pad = (n) => String(Math.abs(n)).padStart(2, '0');
    const offsetMin = d.getTimezoneOffset();
    const sign = offsetMin > 0 ? '-' : '+';
    const hoursOffset = pad(Math.floor(Math.abs(offsetMin) / 60));
    const minsOffset = pad(Math.abs(offsetMin) % 60);
    return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}T${pad(d.getHours())}:${pad(d.getMinutes())}:00${sign}${hoursOffset}:${minsOffset}`;
  }

  function readPhotos(files) {
    if (!files || !files.length) return Promise.resolve([]);
    const maxFiles = 4;
    const slice = Array.from(files).slice(0, maxFiles);
    return Promise.all(slice.map(file => new Promise((resolve, reject) => {
      const reader = new FileReader();
      reader.onload = () => resolve({
        name: file.name,
        size: file.size,
        type: file.type,
        dataUrl: reader.result
      });
      reader.onerror = reject;
      reader.readAsDataURL(file);
    })));
  }

  formEl.addEventListener('submit', async (e) => {
    e.preventDefault();
    successEl.style.display = 'none';
    errorEl.style.display = 'none';

    const fullName = document.getElementById('custName').value.trim();
    const [firstName, ...rest] = fullName.split(/\s+/);
    const lastName = rest.join(' ') || 'Customer';

    const startIso = toIsoWithOffset(document.getElementById('prefDate').value, document.getElementById('prefStart').value);
    let endIso = null;
    if (startIso) {
      const endDate = new Date(startIso);
      endDate.setHours(endDate.getHours() + 2);
      endIso = endDate.toISOString();
    }

    const selectedRun = runEl.options[runEl.selectedIndex]?.text || '';
    const selectedPanelLoc = panelLocEl.options[panelLocEl.selectedIndex]?.text || '';

    const notes = [
      `Run: ${selectedRun}`,
      `Panel location: ${selectedPanelLoc}`,
      `Charger hardware: ${document.getElementById('chargerBrand').value}`,
      `Desired amperage: ${document.getElementById('amps').value}`,
      `Permit included: ${permitEl.checked ? 'Yes' : 'No'}`,
      outsideOutletEl.checked ? 'Outside outlet requested' : null,
      document.getElementById('notes').value
    ].filter(Boolean).join('\n');

    const photoPayload = await readPhotos(photosEl.files);

    const payload = {
      source: 'website-calculator',
      customer: {
        firstName: firstName || 'Customer',
        lastName,
        email: document.getElementById('custEmail').value || undefined,
        phone: document.getElementById('custPhone').value || undefined
      },
      service: {
        type: 'ev-charger-install',
        notes,
        estimatedPrice: currentEstimateValue || undefined,
        options: {
          run: runEl.value,
          panelLocation: panelLocEl.value,
          permit: permitEl.checked,
          outsideOutlet: outsideOutletEl.checked || undefined,
          chargerHardware: document.getElementById('chargerBrand').value,
          amps: document.getElementById('amps').value,
          photos: photoPayload.length ? photoPayload : undefined
        }
      },
      schedule: (() => {
        if (startIso) {
          return { start: startIso, end: endIso };
        }
        const startFallback = new Date(Date.now() + 24 * 60 * 60 * 1000);
        const endFallback = new Date(startFallback.getTime() + 2 * 60 * 60 * 1000);
        return { start: startFallback.toISOString(), end: endFallback.toISOString() };
      })()
    };

    try {
      const endpoint = formEl.getAttribute('action');
      const res = await fetch(endpoint, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const data = await res.json().catch(() => ({}));
      if (!res.ok) {
        throw new Error(data?.error || 'API error');
      }
      successEl.style.display = 'block';
      formEl.reset();
      setPhotoRequirement();
      calc();
    } catch (err) {
      console.error(err);
      errorEl.style.display = 'block';
    }
  });
})();
</script>
</body>
</html>
